# Google Drive プレイリスト再生アプリ

Google Drive上の動画ファイルを、Googleスプレッドシートで管理されたリスト順に連続再生するWebアプリケーションです。
「テレビ番組」のような演出（タイトル画面 → 本編）や、課題ごとのフィルタリング機能を備えています。

## 主な機能

*   **連続再生**: リスト順に動画を自動再生します。
*   **タイトルスクリーン**: 動画開始前にタイトルと製作者名を表示するカウントダウン画面（トリキリ）を挟みます。
*   **プリロード**: タイトル画面表示中に裏で動画を読み込み、スムーズな再生開始を実現しています。
*   **フィルタリング**: 「課題名」でプレイリストを絞り込むことができます。
*   **キーボード操作**: 矢印キーやスペースキーで快適に操作可能です。
*   **年度更新対応**: 4月1日をまたぐと、自動的にスプレッドシートのデータをクリアする機能を搭載しています（GASバックエンド）。

## セットアップ手順

### 1. Googleスプレッドシートの準備

新しいスプレッドシートを作成し、シート名を「上映用」に変更します（またはコード内の定数を変更）。
1行目に以下のヘッダーを設定してください（列の順序は問いません）。

| 動画タイトル | ファイルID | 製作者氏名 | 課題名 |
| :--- | :--- | :--- | :--- |
| 動画のタイトル | Google DriveのファイルID | 制作者の名前 | 課題A |

*   **ファイルID**（必須）: Google Drive上の動画ファイルのIDを入力します。
*   **動画タイトル**: 動画のタイトルを入力します。
*   **製作者氏名**: 制作者の名前を入力します。
*   **課題名**: フィルタリングに使用する課題名を入力します。

### 2. Google Apps Script (GAS) の設定

1.  スプレッドシートのメニューから「拡張機能」 > 「Apps Script」を開きます。
2.  `code.gs` の内容を `コード.gs` に貼り付けます。
3.  `index.html` ファイルを作成し、HTMLコードを貼り付けます。
4.  `code.gs` 内の `SPREADSHEET_ID` 定数を、作成したスプレッドシートのIDに書き換えます。

### 3. デプロイ

1.  GASエディタの右上の「デプロイ」 > 「新しいデプロイ」をクリックします。
2.  「種類の選択」で「ウェブアプリ」を選択します。
3.  以下の設定を行います：
    *   **説明**: 任意
    *   **次のユーザーとして実行**: 自分
    *   **アクセスできるユーザー**: 全員（Googleアカウントを持つ全員）、または組織内
4.  「デプロイ」をクリックし、発行されたURLを開いて動作を確認します。

## 操作方法

*   **再生/一時停止**: スペースキー
*   **次の動画**: 右矢印キー / 次へボタン
*   **前の動画**: 左矢印キー / 前へボタン
*   **リスト選択**: 上下矢印キーで選択、Enterで再生
*   **スキップ**: タイトル画面表示中にスペースキーまたは「すぐに再生」ボタン

## ファイル構成

*   `index.html`: フロントエンド（UI/UX、プレーヤー制御、Tailwind CSS）
*   `code.gs`: バックエンド（スプレッドシート連携、API提供、キャッシュ管理、年度更新処理）

## 注意事項

*   動画ファイルは、閲覧権限が適切に設定されている必要があります（「リンクを知っている全員」など）。